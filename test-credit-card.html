<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡ç”¨å¡åŠŸèƒ½æ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: #0a0a0c;
            color: white;
            padding: 20px;
        }
        .test-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
        }
        .success {
            color: #10b981;
        }
        .error {
            color: #ef4444;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª ä¿¡ç”¨å¡åŠŸèƒ½æ¸¬è©¦é é¢</h1>
    <p>é€™å€‹é é¢ç”¨ä¾†ç¢ºèªä½ çš„ index.html æ˜¯å¦åŒ…å«ä¿¡ç”¨å¡åŠŸèƒ½</p>
    
    <div id="results"></div>
    
    <script>
        const results = [];
        
        function addResult(name, passed, details) {
            results.push({ name, passed, details });
        }
        
        // æ¸¬è©¦ 1: æª¢æŸ¥ index.html æ–‡ä»¶å¤§å°
        fetch('index.html')
            .then(response => response.text())
            .then(html => {
                const lines = html.split('\n').length;
                addResult('æ–‡ä»¶è¡Œæ•¸', lines > 4900, `index.html æœ‰ ${lines} è¡Œï¼ˆæ‡‰è©²ç´„ 4980 è¡Œï¼‰`);
                
                // æ¸¬è©¦ 2: æª¢æŸ¥ä¿¡ç”¨å¡ç›¸é—œä»£ç¢¼
                const hasCreditCard = html.includes('ä¿¡ç”¨å¡ç®¡ç†');
                addResult('ä¿¡ç”¨å¡ç®¡ç†', hasCreditCard, hasCreditCard ? 'âœ“ æ‰¾åˆ°ä¿¡ç”¨å¡ç®¡ç†ä»£ç¢¼' : 'âœ— æœªæ‰¾åˆ°ä¿¡ç”¨å¡ç®¡ç†');
                
                // æ¸¬è©¦ 3: æª¢æŸ¥åˆ†æœŸåŠŸèƒ½
                const hasInstallments = html.includes('installments');
                addResult('åˆ†æœŸåŠŸèƒ½', hasInstallments, hasInstallments ? 'âœ“ æ‰¾åˆ°åˆ†æœŸåŠŸèƒ½ä»£ç¢¼' : 'âœ— æœªæ‰¾åˆ°åˆ†æœŸåŠŸèƒ½');
                
                // æ¸¬è©¦ 4: æª¢æŸ¥åˆ©æ¯è¨ˆç®—
                const hasInterest = html.includes('calculateCreditDetails');
                addResult('åˆ©æ¯è¨ˆç®—', hasInterest, hasInterest ? 'âœ“ æ‰¾åˆ°åˆ©æ¯è¨ˆç®—å‡½æ•¸' : 'âœ— æœªæ‰¾åˆ°åˆ©æ¯è¨ˆç®—å‡½æ•¸');
                
                // æ¸¬è©¦ 5: æª¢æŸ¥å¸³å–®è¨ˆç®—
                const hasBilling = html.includes('calculateCreditCardBillThisMonth');
                addResult('å¸³å–®è¨ˆç®—', hasBilling, hasBilling ? 'âœ“ æ‰¾åˆ°å¸³å–®è¨ˆç®—å‡½æ•¸' : 'âœ— æœªæ‰¾åˆ°å¸³å–®è¨ˆç®—å‡½æ•¸');
                
                // æ¸¬è©¦ 6: æª¢æŸ¥åˆå§‹æ¬ æ¬¾
                const hasInitialBalance = html.includes('initialBalance');
                addResult('åˆå§‹æ¬ æ¬¾', hasInitialBalance, hasInitialBalance ? 'âœ“ æ‰¾åˆ°åˆå§‹æ¬ æ¬¾åŠŸèƒ½' : 'âœ— æœªæ‰¾åˆ°åˆå§‹æ¬ æ¬¾åŠŸèƒ½');
                
                // æ¸¬è©¦ 7: æª¢æŸ¥é›²ç«¯åŒæ­¥
                const hasCreditSync = html.includes('credit_cards');
                addResult('é›²ç«¯åŒæ­¥', hasCreditSync, hasCreditSync ? 'âœ“ æ‰¾åˆ°ä¿¡ç”¨å¡åŒæ­¥ä»£ç¢¼' : 'âœ— æœªæ‰¾åˆ°ä¿¡ç”¨å¡åŒæ­¥ä»£ç¢¼');
                
                // é¡¯ç¤ºçµæœ
                displayResults();
            })
            .catch(error => {
                document.getElementById('results').innerHTML = `
                    <div class="test-item error">
                        <h3>âŒ éŒ¯èª¤</h3>
                        <p>ç„¡æ³•è®€å– index.html æ–‡ä»¶</p>
                        <p>éŒ¯èª¤ä¿¡æ¯: ${error.message}</p>
                        <p><strong>è«‹ç¢ºèªï¼š</strong></p>
                        <ol>
                            <li>ä½ æ˜¯å¦ç”¨æœ¬åœ° HTTP æœå‹™å™¨æ‰“é–‹é€™å€‹æ–‡ä»¶ï¼Ÿ</li>
                            <li>index.html å’Œ test-credit-card.html åœ¨åŒä¸€ç›®éŒ„å—ï¼Ÿ</li>
                        </ol>
                        <p>å»ºè­°ï¼šåœ¨çµ‚ç«¯é‹è¡Œ <code>python3 -m http.server 8000</code> ç„¶å¾Œè¨ªå• http://localhost:8000/test-credit-card.html</p>
                    </div>
                `;
            });
        
        function displayResults() {
            const passedCount = results.filter(r => r.passed).length;
            const totalCount = results.length;
            
            let html = `
                <div class="test-item ${passedCount === totalCount ? 'success' : 'error'}">
                    <h2>æ¸¬è©¦çµæœ: ${passedCount}/${totalCount} é€šé</h2>
                    ${passedCount === totalCount ? 
                        '<p>ğŸ‰ æ­å–œï¼ä½ çš„ index.html åŒ…å«å®Œæ•´çš„ä¿¡ç”¨å¡åŠŸèƒ½ï¼</p>' : 
                        '<p>âš ï¸ ä½ çš„ index.html å¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬</p>'
                    }
                </div>
            `;
            
            results.forEach(result => {
                html += `
                    <div class="test-item">
                        <h3>${result.passed ? 'âœ…' : 'âŒ'} ${result.name}</h3>
                        <p>${result.details}</p>
                    </div>
                `;
            });
            
            if (passedCount !== totalCount) {
                html += `
                    <div class="test-item error">
                        <h3>ğŸ”§ è§£æ±ºæ–¹æ¡ˆ</h3>
                        <ol>
                            <li><strong>æ¸…é™¤ç€è¦½å™¨ç·©å­˜:</strong> Ctrl+Shift+Deleteï¼ˆWindowsï¼‰æˆ– Cmd+Shift+Deleteï¼ˆMacï¼‰</li>
                            <li><strong>å¼·åˆ¶åˆ·æ–°:</strong> Ctrl+Shift+Rï¼ˆWindowsï¼‰æˆ– Cmd+Shift+Rï¼ˆMacï¼‰</li>
                            <li><strong>ä½¿ç”¨ç„¡ç—•æ¨¡å¼:</strong> æ‰“é–‹ç„¡ç—•è¦–çª—é‡æ–°æ¸¬è©¦</li>
                            <li><strong>ç¢ºèªæ–‡ä»¶:</strong> æª¢æŸ¥ä½ æ‰“é–‹çš„ index.html æ˜¯å¦åœ¨æ­£ç¢ºçš„ç›®éŒ„</li>
                        </ol>
                        <p><strong>ç•¶å‰ç›®éŒ„æ‡‰è©²æ˜¯:</strong> /Users/chenyouwei/Desktop/Ledger(cursor)/ledger-app-1/index.html</p>
                    </div>
                `;
            }
            
            document.getElementById('results').innerHTML = html;
        }
    </script>
</body>
</html>
